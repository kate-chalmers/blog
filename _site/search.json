[
  {
    "objectID": "posts/spotify api/index.html",
    "href": "posts/spotify api/index.html",
    "title": "Post #1: Blog Post (Taylorâ€™s Version)",
    "section": "",
    "text": "library(tidyverse)\nlibrary(spotifyr)\nlibrary(ggridges)\nlibrary(RColorBrewer)\n\n# Stored API code in config folder and added to gitignore file\nsource(\"./config.R\")\n\n# Access API username + id\nSys.setenv(SPOTIFY_CLIENT_ID = spotify_id)\nSys.setenv(SPOTIFY_CLIENT_SECRET = spotify_code)\n\nspotify_access_token <- get_spotify_access_token()\n\nspotify_id <- function(artist_name) {\n  \n  # Removed print so there is no echo in Quarto doc\n  artist_id <- search_spotify(artist_name, type = \"artist\") %>%\n    select(id) %>%\n    slice(1) %>%\n    as.character()\n  \n  return(artist_id)\n   \n}\n\ntswift_id <- spotify_id(\"Taylor Swift\")\n\n# Pull Taylor's music\ntswift_spotify <- spotifyr::get_artist_audio_features(\n  artist = tswift_id,\n  include_groups = \"album\",\n  authorization = spotify_access_token\n)\n\n# Filter for Taylor's Version + Originals\ntaylors_version <- tswift_spotify %>%\n  filter(grepl(\"Taylor's Version\", album_name) | grepl(\"Red\", album_name) | grepl(\"Fearless\", album_name)) %>%\n  filter(!grepl(\"International\", album_name)) %>%\n  filter(!grepl(\"From The Vault\", track_name))\n\n# Exploring speechiness outlier\ntv_dat <- taylors_version %>%\n  filter(grepl(\"Red\", album_name)) %>%\n  select(track_name, speechiness) %>%\n  arrange(-speechiness)\n\n# Added some factoring and text decoration\ntaylors_version |>\n  mutate(album_name = ifelse(grepl(\"Taylor's Version\", album_name), paste0(\"<b>\", album_name, \"</b>\"), album_name),\n         album_name = factor(album_name, c(\"Red (Deluxe Edition)\", \"<b>Red (Taylor's Version)</b>\", \"Fearless (Platinum Edition)\", \"<b>Fearless (Taylor's Version)</b>\"))\n  ) %>%\n  tidyr::pivot_longer(cols = c(\"valence\",\"tempo\",\"danceability\",\"energy\", \"speechiness\", \"acousticness\"), names_to = \"metric\") |>\n  ggplot(aes(x = value, y = album_name, fill=factor(metric))) +\n    geom_density_ridges(show.legend = FALSE) +\n    theme_ridges() +\n    labs(title = \"Taylor Swift - Musical features of studio albums for original releases vs. re-recordings\",\n         subtitle = \"Based on Spotify's Web API with spotifyr\",\n         y=NULL,\n         x=NULL)+\n    facet_wrap(~metric, scales = \"free_x\", nrow = 2,\n               labeller = as_labeller(\n                 c(`danceability`=\"Danceability\", \n                   `energy` = \"Energy\",\n                   `acousticness` = \"Acousticness\", \n                   `speechiness` = \"Speechiness\",\n                   `tempo` = \"Tempo\", \n                   `valence` = \"Valence\")\n               ))+\n    rcartocolor::scale_fill_carto_d(palette=\"Temps\") +\n  theme(plot.title.position =  \"plot\",\n        text = element_text(family=\"Avenir Next\"),\n        axis.text.y=ggtext::element_markdown())"
  }
]
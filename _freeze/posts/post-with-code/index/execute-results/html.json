{
  "hash": "a6055637d18335b3bd6621f0c9fcb702",
  "result": {
    "markdown": "---\ntitle: \"Post #1: Maddison Graph\"\ndate: \"2023-06-19\"\nimage: \"image.jpg\"\nexecute:\n  message: false\n  warning: false\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(countrycode) \nlibrary(RColorBrewer)\nlibrary(ggrepel)\n\n# Data ####\nowid_maddison_proj <- readr::read_csv(\"https://raw.githubusercontent.com/owid/owid-datasets/master/datasets/Maddison%20Project%20Database%202020%20(Bolt%20and%20van%20Zanden%20(2020))/Maddison%20Project%20Database%202020%20(Bolt%20and%20van%20Zanden%20(2020)).csv\")\n\nowid_maddison_proj_df <- owid_maddison_proj |>\n  rename(country=1,year=2,gdppc=3,pop=4,gdp=5) |>\n  mutate(iso3c = countrycode::countrycode(sourcevar = country, origin = \"country.name\", destination = \"iso3c\"),\n                region = countrycode::countrycode(sourcevar = country, origin = \"country.name\", destination = \"region\"))\n\n# A first visual ####\nmaddison_proj_1 <- owid_maddison_proj_df |>\n  filter(year==1990) |>\n  ggplot(aes(x=region,y=gdppc))+\n  geom_boxplot()\n\n# Display graph \nmaddison_proj_1\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Data ####\nowid_maddison_proj_df2 <- owid_maddison_proj_df |>\n  mutate(continent = countrycode::countrycode(sourcevar = iso3c, origin = \"iso3c\", destination = \"continent\"))\n\n# New attempt ####\nmaddison_proj_2 <- owid_maddison_proj_df2 |>\n  filter(year==1990, !is.na(continent)) |>\n  group_by(continent) |>\n  mutate(m_gdppc = median(gdppc, na.rm=TRUE)) |>\n  ungroup() |>\n  mutate(continent = fct_reorder(continent, m_gdppc)) |>\n  ggplot(aes(x=continent,y=gdppc))+\n  geom_boxplot()+\n  scale_y_log10()+\n  theme_classic()+\n  theme(legend.position = \"none\")\n\n# See the result ####\nmaddison_proj_2\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# A third visual ####\nmaddison_proj_3 <- owid_maddison_proj_df2 |>\n  filter(year==1990, !is.na(continent)) |> \n  group_by(continent) |>\n  mutate(m_gdppc = median(gdppc, na.rm=TRUE)) |>\n  ungroup() |>\n  mutate(continent = fct_reorder(continent, m_gdppc)) |>\n  ggplot(aes(x=continent,y=gdppc, color=continent))+\n  geom_boxplot(outlier.alpha= 0.5)+\n  scale_y_log10()+\n  coord_flip()+\n  theme_classic()+\n  theme(legend.position = \"none\")\n\nmaddison_proj_3\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# A forth visual ####\nmaddison_proj_4 <- owid_maddison_proj_df2 |>\n  filter(year==1990, !is.na(continent)) |>\n  group_by(continent) |>\n  mutate(m_gdppc = median(gdppc, na.rm=TRUE)) |>\n  ungroup() |>\n  mutate(continent = fct_reorder(continent, m_gdppc)) |>\n  ggplot(aes(x=continent,y=gdppc, color=continent))+\n  geom_boxplot(outlier.alpha= 0.5)+\n  geom_jitter(aes(shape=continent), alpha=0.4)+\n  scale_color_brewer(palette=\"Set1\")+\n  scale_y_log10()+\n  coord_flip()+\n  theme_classic()+\n  theme(legend.position = \"none\")\n\nmaddison_proj_4\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# A fifth visual ####\nmaddison_proj_5 <- owid_maddison_proj_df2 |>\n  dplyr::filter(year==1990, !is.na(continent)) |>\n  dplyr::group_by(continent) |>\n  dplyr::mutate(m_gdppc = median(gdppc, na.rm=TRUE)) |>\n  dplyr::ungroup() |>\n  dplyr::mutate(continent = fct_reorder(continent, m_gdppc)) |>\n  ggplot(aes(x=continent,y=gdppc, color=continent))+\n  geom_boxplot(outlier.alpha= 0.5)+\n  geom_jitter(aes(shape=continent), alpha=0.4)+\n  geom_text_repel(data = . %>%\n                    dplyr::filter(country %in%  c(\"Mexico\",\"China\",\"Nigeria\",\"France\",\"Australia\"), year==1990),\n                    aes(label=country), size=3, color=\"black\",\n                    position = position_jitter(seed = 1))+\n  scale_y_continuous(trans = \"log10\",labels = scales::number_format(big.mark=\" \"))+\n  scale_color_brewer(palette=\"Set1\")+\n  coord_flip()+\n  labs(x = NULL, y = \"GDP per capita\",\n       title = \"Maddison Project - GDP per capita in 1990\",\n       subtitle = \"GDP per capita\",\n       caption = \"Source: Own calculations based on Maddison Project and OWID GitHub\")+\n  theme_classic()+\n  theme(legend.position = \"none\",\n        axis.text.y = element_text(size = 14)\n  )\n\n# Display plot ####\nmaddison_proj_5\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}